{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\dneub\\\\Documents\\\\HW\\\\Project3\\\\project-3\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\dneub\\\\Documents\\\\HW\\\\Project3\\\\project-3\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"C:\\\\Users\\\\dneub\\\\Documents\\\\HW\\\\Project3\\\\project-3\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\dneub\\\\Documents\\\\HW\\\\Project3\\\\project-3\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\dneub\\\\Documents\\\\HW\\\\Project3\\\\project-3\\\\client\\\\src\\\\pages\\\\Books.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport DeleteBtn from \"../components/DeleteBtn\";\nimport Jumbotron from \"../components/Jumbotron\";\nimport API from \"../utils/API\";\nimport { Link } from \"react-router-dom\";\nimport { Col, Row, Container } from \"../components/Grid\";\nimport { List, ListItem } from \"../components/List\";\nimport { Input, TextArea, FormBtn } from \"../components/Form\";\nimport { LikeButton } from '../components/LikeButton';\nimport { BookContext } from '../context/BookContext';\n\nvar Books = function Books() {\n  var _useState = useState({\n    author: '',\n    synopsis: '',\n    title: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      formData = _useState2[0],\n      setFormData = _useState2[1];\n\n  var _useContext = useContext(BookContext),\n      books = _useContext.books,\n      setBooks = _useContext.setBooks;\n\n  var loadBooks = function loadBooks() {\n    API.getBooks().then(function (res) {\n      setBooks(res.data);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  useEffect(function () {\n    if (books.length === 0) {\n      loadBooks();\n    }\n  }, []);\n\n  var deleteBook = function deleteBook(id) {\n    API.deleteBook(id).then(function (res) {\n      var remainingBooks = books.filter(function (book) {\n        return book._id !== id;\n      });\n      setBooks(remainingBooks);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n\n  var incrementLikes = function incrementLikes(id) {\n    console.log('id of book to increase likes', id, books);\n    var indexToUpdate = books.findIndex(function (book) {\n      return book._id === id;\n    });\n\n    var newBooks = _toConsumableArray(books);\n\n    newBooks[indexToUpdate].likes = newBooks[indexToUpdate].likes ? newBooks[indexToUpdate].likes + 1 : 1;\n    setBooks(newBooks);\n  };\n\n  var handleInputChange = function handleInputChange(event) {\n    var _event$target = event.target,\n        name = _event$target.name,\n        value = _event$target.value;\n    setFormData(_objectSpread({}, formData, _defineProperty({}, name, value)));\n  };\n\n  var handleFormSubmit = function handleFormSubmit(event) {\n    event.preventDefault();\n    var author = formData.author,\n        synopsis = formData.synopsis,\n        title = formData.title;\n\n    if (title && author) {\n      API.saveBook({\n        author: author,\n        likes: 0,\n        synopsis: synopsis,\n        title: title\n      }).then(function (res) {\n        return loadBooks();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  };\n\n  return React.createElement(Container, {\n    fluid: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Col, {\n    size: \"md-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Jumbotron, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"What Books Should I Read?\")), React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(Input, {\n    value: formData.title,\n    onChange: handleInputChange,\n    name: \"title\",\n    placeholder: \"Title (required)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(Input, {\n    value: formData.author,\n    onChange: handleInputChange,\n    name: \"author\",\n    placeholder: \"Author (required)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(TextArea, {\n    value: formData.synopsis,\n    onChange: handleInputChange,\n    name: \"synopsis\",\n    placeholder: \"Synopsis (Optional)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), React.createElement(FormBtn, {\n    disabled: !(formData.author && formData.title),\n    onClick: handleFormSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Submit Book\"))), React.createElement(Col, {\n    size: \"md-6 sm-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(Jumbotron, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Books On My List\")), books.length ? React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, books.map(function (book) {\n    return React.createElement(ListItem, {\n      key: book._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(LikeButton, {\n      id: book._id,\n      incrementLikes: incrementLikes,\n      likes: book.likes | 0,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(Link, {\n      to: \"/books/\" + book._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, book.title, \" by \", book.author)), React.createElement(DeleteBtn, {\n      onClick: function onClick() {\n        return deleteBook(book._id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }));\n  })) : React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, \"No Results to Display\"))));\n};\n\nexport default Books;","map":{"version":3,"sources":["C:/Users/dneub/Documents/HW/Project3/project-3/client/src/pages/Books.js"],"names":["React","useContext","useEffect","useState","DeleteBtn","Jumbotron","API","Link","Col","Row","Container","List","ListItem","Input","TextArea","FormBtn","LikeButton","BookContext","Books","author","synopsis","title","formData","setFormData","books","setBooks","loadBooks","getBooks","then","res","data","catch","err","console","log","length","deleteBook","id","remainingBooks","filter","book","_id","incrementLikes","indexToUpdate","findIndex","newBooks","likes","handleInputChange","event","target","name","value","handleFormSubmit","preventDefault","saveBook","map"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,oBAA/B;AACA,SAASC,KAAT,EAAgBC,QAAhB,EAA0BC,OAA1B,QAAyC,oBAAzC;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,WAAT,QAA4B,wBAA5B;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAAA,kBACcf,QAAQ,CAAC;AACvCgB,IAAAA,MAAM,EAAE,EAD+B;AAEvCC,IAAAA,QAAQ,EAAE,EAF6B;AAGvCC,IAAAA,KAAK,EAAE;AAHgC,GAAD,CADtB;AAAA;AAAA,MACXC,QADW;AAAA,MACDC,WADC;;AAAA,oBAMQtB,UAAU,CAACgB,WAAD,CANlB;AAAA,MAMXO,KANW,eAMXA,KANW;AAAA,MAMJC,QANI,eAMJA,QANI;;AAQlB,MAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtBpB,IAAAA,GAAG,CAACqB,QAAJ,GACGC,IADH,CACQ,UAAAC,GAAG,EAAI;AACXJ,MAAAA,QAAQ,CAACI,GAAG,CAACC,IAAL,CAAR;AACD,KAHH,EAKGC,KALH,CAKS,UAAAC,GAAG;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,KALZ;AAMD,GAPD;;AASA9B,EAAAA,SAAS,CAAC,YAAM;AACb,QAAIsB,KAAK,CAACW,MAAN,KAAiB,CAArB,EAAwB;AACxBT,MAAAA,SAAS;AACR;AACF,GAJO,EAIL,EAJK,CAAT;;AAMA,MAAMU,UAAU,GAAG,SAAbA,UAAa,CAAAC,EAAE,EAAI;AACvB/B,IAAAA,GAAG,CAAC8B,UAAJ,CAAeC,EAAf,EACGT,IADH,CACQ,UAAAC,GAAG,EAAI;AACX,UAAMS,cAAc,GAAGd,KAAK,CAACe,MAAN,CAAa,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,GAAL,KAAaJ,EAAjB;AAAA,OAAjB,CAAvB;AACAZ,MAAAA,QAAQ,CAACa,cAAD,CAAR;AACD,KAJH,EAKGP,KALH,CAKS,UAAAC,GAAG;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,KALZ;AAMD,GAPD;;AASA,MAAMU,cAAc,GAAG,SAAjBA,cAAiB,CAAAL,EAAE,EAAI;AAC3BJ,IAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4CG,EAA5C,EAAgDb,KAAhD;AACA,QAAMmB,aAAa,GAAGnB,KAAK,CAACoB,SAAN,CAAgB,UAAAJ,IAAI;AAAA,aAAIA,IAAI,CAACC,GAAL,KAAaJ,EAAjB;AAAA,KAApB,CAAtB;;AACA,QAAMQ,QAAQ,sBAAOrB,KAAP,CAAd;;AACAqB,IAAAA,QAAQ,CAACF,aAAD,CAAR,CAAwBG,KAAxB,GAAgCD,QAAQ,CAACF,aAAD,CAAR,CAAwBG,KAAxB,GAAgCD,QAAQ,CAACF,aAAD,CAAR,CAAwBG,KAAxB,GAAgC,CAAhE,GAAoE,CAApG;AACArB,IAAAA,QAAQ,CAACoB,QAAD,CAAR;AAED,GAPD;;AASA,MAAME,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAC,KAAK,EAAI;AAAA,wBACTA,KAAK,CAACC,MADG;AAAA,QACzBC,IADyB,iBACzBA,IADyB;AAAA,QACnBC,KADmB,iBACnBA,KADmB;AAEjC5B,IAAAA,WAAW,mBACND,QADM,sBAER4B,IAFQ,EAEDC,KAFC,GAAX;AAID,GAND;;AAQA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAJ,KAAK,EAAI;AAChCA,IAAAA,KAAK,CAACK,cAAN;AADgC,QAGzBlC,MAHyB,GAGEG,QAHF,CAGzBH,MAHyB;AAAA,QAGjBC,QAHiB,GAGEE,QAHF,CAGjBF,QAHiB;AAAA,QAGPC,KAHO,GAGEC,QAHF,CAGPD,KAHO;;AAKhC,QAAIA,KAAK,IAAIF,MAAb,EAAqB;AACnBb,MAAAA,GAAG,CAACgD,QAAJ,CAAa;AACXnC,QAAAA,MAAM,EAANA,MADW;AAEX2B,QAAAA,KAAK,EAAE,CAFI;AAGX1B,QAAAA,QAAQ,EAARA,QAHW;AAIXC,QAAAA,KAAK,EAALA;AAJW,OAAb,EAMGO,IANH,CAMQ,UAAAC,GAAG;AAAA,eAAIH,SAAS,EAAb;AAAA,OANX,EAOGK,KAPH,CAOS,UAAAC,GAAG;AAAA,eAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,OAPZ;AAQD;AACF,GAfD;;AAiBE,SACE,oBAAC,SAAD;AAAW,IAAA,KAAK,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,GAAD;AAAK,IAAA,IAAI,EAAC,MAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,CADF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,KAAD;AACE,IAAA,KAAK,EAAEV,QAAQ,CAACD,KADlB;AAEE,IAAA,QAAQ,EAAE0B,iBAFZ;AAGE,IAAA,IAAI,EAAC,OAHP;AAIE,IAAA,WAAW,EAAC,kBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOE,oBAAC,KAAD;AACE,IAAA,KAAK,EAAEzB,QAAQ,CAACH,MADlB;AAEE,IAAA,QAAQ,EAAE4B,iBAFZ;AAGE,IAAA,IAAI,EAAC,QAHP;AAIE,IAAA,WAAW,EAAC,mBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,EAaE,oBAAC,QAAD;AACE,IAAA,KAAK,EAAEzB,QAAQ,CAACF,QADlB;AAEE,IAAA,QAAQ,EAAE2B,iBAFZ;AAGE,IAAA,IAAI,EAAC,UAHP;AAIE,IAAA,WAAW,EAAC,qBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbF,EAmBE,oBAAC,OAAD;AACE,IAAA,QAAQ,EAAE,EAAEzB,QAAQ,CAACH,MAAT,IAAmBG,QAAQ,CAACD,KAA9B,CADZ;AAEE,IAAA,OAAO,EAAE+B,gBAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAnBF,CAJF,CADF,EAgCE,oBAAC,GAAD;AAAK,IAAA,IAAI,EAAC,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CADF,EAIG5B,KAAK,CAACW,MAAN,GACC,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGX,KAAK,CAAC+B,GAAN,CAAU,UAAAf,IAAI;AAAA,WACb,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,IAAI,CAACC,GAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,UAAD;AAAY,MAAA,EAAE,EAAED,IAAI,CAACC,GAArB;AAA0B,MAAA,cAAc,EAAEC,cAA1C;AAA0D,MAAA,KAAK,EAAEF,IAAI,CAACM,KAAL,GAAa,CAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAE,YAAYN,IAAI,CAACC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGD,IAAI,CAACnB,KADR,UACmBmB,IAAI,CAACrB,MADxB,CADF,CAFF,EAOE,oBAAC,SAAD;AAAW,MAAA,OAAO,EAAE;AAAA,eAAMiB,UAAU,CAACI,IAAI,CAACC,GAAN,CAAhB;AAAA,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,CADa;AAAA,GAAd,CADH,CADD,GAeC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAnBJ,CAhCF,CADF,CADF;AA2DH,CA7HD;;AA+HA,eAAevB,KAAf","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\";\r\nimport DeleteBtn from \"../components/DeleteBtn\";\r\nimport Jumbotron from \"../components/Jumbotron\";\r\nimport API from \"../utils/API\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Col, Row, Container } from \"../components/Grid\";\r\nimport { List, ListItem } from \"../components/List\";\r\nimport { Input, TextArea, FormBtn } from \"../components/Form\";\r\nimport { LikeButton } from '../components/LikeButton';\r\nimport { BookContext } from '../context/BookContext';\r\n\r\nconst Books = () => {\r\n  const [formData, setFormData] = useState({\r\n    author: '',\r\n    synopsis: '',\r\n    title: ''\r\n  });\r\n  const {books, setBooks} = useContext(BookContext);\r\n\r\n  const loadBooks = () => {\r\n    API.getBooks()\r\n      .then(res => {\r\n        setBooks(res.data)\r\n      }\r\n      )\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n     if (books.length === 0) {\r\n     loadBooks();\r\n     }\r\n   }, []);\r\n\r\n  const deleteBook = id => {\r\n    API.deleteBook(id)\r\n      .then(res => {\r\n        const remainingBooks = books.filter(book => book._id !== id);\r\n        setBooks(remainingBooks);\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n\r\n  const incrementLikes = id => {\r\n    console.log('id of book to increase likes', id, books);\r\n    const indexToUpdate = books.findIndex(book => book._id === id);\r\n    const newBooks = [...books];\r\n    newBooks[indexToUpdate].likes = newBooks[indexToUpdate].likes ? newBooks[indexToUpdate].likes + 1 : 1;\r\n    setBooks(newBooks);\r\n\r\n  }\r\n\r\n  const handleInputChange = event => {\r\n    const { name, value } = event.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: value\r\n    })\r\n  };\r\n\r\n  const handleFormSubmit = event => {\r\n    event.preventDefault();\r\n    \r\n    const {author, synopsis, title} = formData;\r\n\r\n    if (title && author) {\r\n      API.saveBook({\r\n        author,\r\n        likes: 0,\r\n        synopsis,\r\n        title\r\n      })\r\n        .then(res => loadBooks())\r\n        .catch(err => console.log(err));\r\n    }\r\n  };\r\n\r\n    return (\r\n      <Container fluid>\r\n        <Row>\r\n          <Col size=\"md-6\">\r\n            <Jumbotron>\r\n              <h1>What Books Should I Read?</h1>\r\n            </Jumbotron>\r\n            <form>\r\n              <Input\r\n                value={formData.title}\r\n                onChange={handleInputChange}\r\n                name=\"title\"\r\n                placeholder=\"Title (required)\"\r\n              />\r\n              <Input\r\n                value={formData.author}\r\n                onChange={handleInputChange}\r\n                name=\"author\"\r\n                placeholder=\"Author (required)\"\r\n              />\r\n              <TextArea\r\n                value={formData.synopsis}\r\n                onChange={handleInputChange}\r\n                name=\"synopsis\"\r\n                placeholder=\"Synopsis (Optional)\"\r\n              />\r\n              <FormBtn\r\n                disabled={!(formData.author && formData.title)}\r\n                onClick={handleFormSubmit}\r\n              >\r\n                Submit Book\r\n              </FormBtn>\r\n            </form>\r\n          </Col>\r\n          <Col size=\"md-6 sm-12\">\r\n            <Jumbotron>\r\n              <h1>Books On My List</h1>\r\n            </Jumbotron>\r\n            {books.length ? (\r\n              <List>\r\n                {books.map(book => (\r\n                  <ListItem key={book._id}>\r\n                    <LikeButton id={book._id} incrementLikes={incrementLikes} likes={book.likes | 0} />\r\n                    <Link to={\"/books/\" + book._id}>\r\n                      <strong>\r\n                        {book.title} by {book.author}\r\n                      </strong>\r\n                    </Link>\r\n                    <DeleteBtn onClick={() => deleteBook(book._id)} />\r\n                  </ListItem>\r\n                ))}\r\n              </List>\r\n            ) : (\r\n              <h3>No Results to Display</h3>\r\n            )}\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n}\r\n\r\nexport default Books;\r\n"]},"metadata":{},"sourceType":"module"}